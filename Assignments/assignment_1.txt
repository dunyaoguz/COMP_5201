Name: Hugo JONCOUR                                     ID: 40139230

COMP5201                       Assignment 1                          Fall 2020
Issued: September 15, 2020                             Due: September 29, 2020
Submit electronically.  No extension will be granted. 

1. [16 marks] Amdahl's Law.

a) On a uniprocessor, serial portion A of program P consumes x% of the time,
while parallel portion B consumes the remaining (100 - x)%.  On a parallel
computer, portion A speeds up by a factor of 1.5, while portion B speeds up
by the number of processors.  The theoretical maximum speedup is 200 times.
How many real processors are needed to achieve at least 75% of the maximum
speedup?  How many real processors are needed to achieve at least 90% of
the maximum speedup?
 - at least 75% of the maximum speedup:               P = 597 processors

 - at least 90% of the maximum speedup:               P = 1791 processors

b) Portion A of program P takes 'x' seconds; portion B takes 'y' seconds.
'x + y = 100'.  A is wholly sequential, while B is wholly parallel.  With
an infinite number of processors, we get a speedup of 's'.  It takes 7 1/3
imaginary processors (8 real processors) to achieve a speedup of at least
's/2'.  What are the values of 'x' and 'y'?  (They are integers).
                                                               (x,y)  = (12,88)
2. [16 marks] Performance and Power Efficiency.

A heterogeneous multicore chip adapts to the particular requirements by
turning on a certain number of each of its two classes of core.  Alpha cores
generate 14 GFs/s and dissipate 2 W (watts) of power.  Beta cores generate
1 GF/s and dissipate 0.1 W.  We seek to maximize aggregate chip performance
while still achieving a power efficiency of at least 7.39 GFs/s/W.
Electrical considerations dictate that precisely 500 cores be turned on.
a) Indicate the number of cores turned on.
                                          _____ alpha cores, _____ beta cores

b) What is chip peak performance and chip power dissipation?
                                                         _____ TFs/s, _____ W
3. [20 marks] MIPS Assembly Language.

Consider the C++ program fragment:

 for( j=0; j<n; j++ ) {sum+= a[j] * b[n-j-1];}

which performs a computation on two floating-point arrays of size 'n'.
Rewrite this fragment in MIPS assembly language.  Take n = 32.  Use 'f0'
initialized to zero as 'sum'.  The address of 'a[0]' is 1024.  The address
of 'b[0]' is 2048.  Set 'r1' to the address of 'a[0]'.  Set 'r2' to the
address of 'b[n-1]'.  Set 'r3' to the byte address immediately following
the end of array 'a'.  Use only the following instructions.

set   f6,0.0      // set 'f6' to 0.0
set   r1,n        // set 'r1' to n
l.d   f6,n(r2)    // load into 'f6' eight bytes starting at Mem[r2+n]
mul.d f4,f0,f2    // put the product 'f0 * f2' into 'f4'
add.d f4,f0,f2    // put the sum 'f0 + f2' into 'f4'
addi  r1,r1,n     // add integer 'n' to 'r1'
subi  r1,r1,n     // subtract integer 'n' from 'r1'
bne   r1,r2,loop  // if 'r1 /= r2' then goto 'loop'

4. [16 marks] Dealing with Overhead.

Consider two generations of bandwith support to nearby memory for a
multicore CPU.  In the first generation, there are 28 Gbs/s of bandwidth to
nearby memory.  In the second generation, there are 256 GBs/s of bandwidth
to nearby memory.  There is a GPU accelerator.  The total time for an RPC
call-work-and-return from the GPU is 4 * 10^-7 s.  A core has 128 64-bit
registers.  Define the cost of a context switch from CPU thread t1 to CPU
thread t2 as four times the cost of moving the register-file contents out
of, or into, the processor.  For each generation, should a thread making
an RPC on the GPU a) spin wait, or b) context switch?  Explain.

Hint: When a thread makes an RPC on a GPU, it is like a regular procedure
call in that the thread may not go on to its next instruction until the
RPC returns.  Imagine that there is some completely separate control
system that synchronizes CPU (actually, core) and GPU; don't even think
about this!  While thread t1 is waiting for the RPC to return, it has a
choice between two options.  It can either spin, doing no useful work, or
it can context switch to thread t2, hoping that thread t2 can do some
useful work while thread t1 is waiting.  You must find the intelligent
option for thread t1 in each of the two generations. 

5. [12 marks] Address-register Sizes.

An n-bit register can hold 2^n distinct bit patterns.  As such, it can only
be used to address a memory whose number of addressable units (typically,
bytes) is less than or equal to 2^n.  In what follows, use the power-of-two
interpretation of Greek prefixes.  I.e., K = 2^10, M = 2^20, etc.  In this
question, register bit sizes need not be a power of two.

a) What is the minimum size of an address register for a computer with 8 GBs
of memory? 
                                                        answer = _____ bits
b) What is the minimum size of an address register for a computer with 35 TBs
of memory?
                                                        answer = _____ bits
c) What is the minimum size of an address register for a computer with 1.05
EBs of memory?
                                                        answer = _____ bits
d) What is the minimum size of an address register for a computer with 0.5
(1/2) EB of memory?
                                                        answer = _____ bits
6. [20 marks] Utility-Cost Tradeoffs

A single NEC SX-9 vector processor unit (VPU) has a peak arithmetic
performance of 102.4 GFs/s.  The memory system supplies a peak memory
bandwidth of 162 GBs/s.  The VPU dissipates 40 W, while the memory system
dissipates 55 W.  Together, both components dissipate 95 W.  Every program
has some arithmetic intensity (ai), measured in flops/byte, that indicates
how much performance is achievable for a given bandwidth.  The equation is:
achievable GFs/s = min{ai*bw, peak GFs/s}.  (For this question, pretend a
memory system comes with interconnect included).

a) What is the minimum ai that achieves peak arithmetic performance on an
SX-9 VPU?                                             ai = _____ flops/byte

b) What is the power efficiency of this computer system at peak performance?
                                                      pe = _____ GFs/s/W

c) A special customer buys two memory systems for the one VPU, thus doubling
both the peak bandwidth and the power dissipated by the memory.  What is the
new minimum ai that achieves peak arithmetic performance?
                                                      ai = _____ flops/byte

d) What is the power efficiency of the new system at peak performance?
                                                      pe = _____ GFs/s/W

e) Since higher power efficiency is a good thing, why would a customer spend
more money to get less of it?

